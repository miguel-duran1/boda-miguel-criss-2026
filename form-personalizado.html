<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Confirma tu Asistencia - Boda de Miguel y Cristina</title>
    <link rel="stylesheet" href="styles.css">
    <script src="scroll-progress.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 8px rgba(166, 123, 91, 0.2);
        }
        
        .form-group {
            margin-bottom: 25px;
            text-align: left;
            max-width: 100%;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #5A4A42;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #D8B48C;
            border-radius: 5px;
            font-family: 'Georgia', serif;
            font-size: 1rem;
            color: #5A4A42;
            background-color: #fff;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            border-color: #A67B5B;
            outline: none;
            box-shadow: 0 0 5px rgba(166, 123, 91, 0.3);
        }
        
        .radio-group {
            display: flex;
            flex-direction: row;
            width: 100%;
            margin-top: 15px;
        }
        
        .radio-option {
            display: flex;
            align-items: flex-start;
            width: 50%;
            position: relative;
        }
        
        .radio-option input[type="radio"] {
            position: absolute;
            top: 3px;
            left: 0;
            margin: 0;
            width: 16px;
            height: 16px;
        }
        
        .radio-option label {
            display: inline-block;
            margin-left: 25px;
            margin-bottom: 0;
            font-weight: normal;
            text-align: left;
        }
        
        @media (max-width: 480px) {
            .radio-group {
                justify-content: space-between;
            }
            
            .radio-option {
                padding-right: 5px;
            }
            
            .radio-option label {
                font-size: 0.95rem;
                margin-left: 22px;
            }
        }
        
        .submit-btn {
            background: linear-gradient(to right, #A67B5B, #D8935F);
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .page-header {
            background: linear-gradient(to right, #A67B5B, #8B5A2B);
            color: white;
            padding: 40px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .page-header h1 {
            color: #FFFFFF;
            font-size: 2.2rem;
            margin-bottom: 15px;
        }
        
        .page-header p {
            color: #FFF8DC;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .important-date {
            font-weight: bold;
            color: #FFFFFF;
            background-color: #A67B5B;
            padding: 5px 10px;
            border-radius: 4px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            display: inline-block;
        }
        
        .page-header p:last-of-type {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            display: inline-block;
        }
        
        .success-message {
            display: none;
            background-color: rgba(126, 178, 138, 0.2);
            color: #3c763d;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            text-align: center;
            border-left: 4px solid #3c763d;
        }
        
        .required {
            color: #d63031;
            margin-left: 3px;
        }
        
        .back-link {
            display: inline-block;
            margin-top: 30px;
            color: #5A4A42;
            text-decoration: none;
            padding: 10px 20px;
            background-color: #EAD7C1;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        
        .back-link:hover {
            background-color: #D8B48C;
        }
        
        .dietary-options {
            margin-top: 10px;
        }
        
        .form-status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        
        .form-status.success {
            display: block;
            background-color: rgba(126, 178, 138, 0.2);
            color: #3c763d;
            border-left: 4px solid #3c763d;
        }
        
        .form-status.error {
            display: block;
            background-color: rgba(217, 83, 79, 0.2);
            color: #a94442;
            border-left: 4px solid #a94442;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="header-container">
            <div class="logo">M&C</div>
            
            <div class="menu-toggle" id="menu-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            
            <nav>
                <ul id="menu">
                    <li style="--i:1"><a href="index.html#hero">Inicio</a></li>
                    <li style="--i:2"><a href="index.html#info">Información</a></li>
                    <li style="--i:3"><a href="index.html#countdown">Cuenta Atrás</a></li>
                    <li style="--i:4"><a href="index.html#rsvp">Asistencia</a></li>
                    <li style="--i:5"><a href="index.html#gifts">Lista de Regalos</a></li>
                    <li style="--i:6"><a href="index.html#location">Ubicación</a></li>
                    <li style="--i:7"><a href="index.html#contact">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- Overlay para cuando el menú está abierto -->
    <div class="menu-overlay" id="menu-overlay"></div>
    
    <main>
        <section>
            <div class="page-header">
                <h1>Confirma tu Asistencia</h1>
                <p>¡Nos encantaría contar contigo en nuestro gran día!</p>
                <p>Por favor, confirma antes del <span class="important-date">31 de marzo de 2026</span></p>
            </div>
            
            <div class="form-container">
                <form id="rsvp-form" action="https://formspree.io/f/xeoarpne" method="POST">
                    <!-- Email (importante para Formspree) -->
                    <div class="form-group">
                        <label for="email">Email<span class="required">*</span></label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <!-- Nombre completo -->
                    <div class="form-group">
                        <label for="name">Nombre completo<span class="required">*</span></label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    
                    <!-- Teléfono -->
                    <div class="form-group">
                        <label for="phone">Teléfono</label>
                        <input type="tel" id="phone" name="phone">
                    </div>
                    
                    <!-- Asistencia -->
                    <div class="form-group">
                        <label>¿Asistirás a nuestra boda?<span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="attending-yes" name="attending" value="Sí, asistiré" required>
                                <label for="attending-yes">Sí, asistiré</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="attending-no" name="attending" value="No podré asistir">
                                <label for="attending-no">No podré asistir</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Número de invitados -->
                    <div class="form-group" id="guests-group">
                        <label for="guests">Número de invitados (incluyéndote)</label>
                        <input type="number" id="guests" name="guests" min="1" value="1">
                    </div>
                    
                    <!-- Restricciones alimentarias -->
                    <div class="form-group" id="dietary-group">
                        <label for="dietary">¿Tienes alguna restricción alimentaria?</label>
                        <select id="dietary" name="dietary">
                            <option value="No, ninguna">No, ninguna</option>
                            <option value="Vegetariano">Vegetariano</option>
                            <option value="Vegano">Vegano</option>
                            <option value="Sin gluten">Sin gluten</option>
                            <option value="Otra">Otra</option>
                        </select>
                        
                        <div id="dietary-details" class="dietary-options" style="display: none;">
                            <label for="dietary-specifics">Por favor, especifica tus restricciones alimentarias:</label>
                            <textarea id="dietary-specifics" name="dietary-specifics" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <!-- Mensaje para los novios -->
                    <div class="form-group">
                        <label for="message">¿Te gustaría dejar algún mensaje para los novios?</label>
                        <textarea id="message" name="message" rows="4"></textarea>
                    </div>
                    
                    <!-- Configuración de Formspree -->
                    <input type="hidden" name="_subject" value="Nueva confirmación de asistencia - Boda Miguel y Cristina">
                    
                    <!-- Estado del formulario -->
                    <div id="form-status" class="form-status"></div>
                    
                    <!-- Botón de envío -->
                    <button type="submit" class="submit-btn">Confirmar Asistencia</button>
                </form>
                
                <!-- Mensaje de éxito -->
                <div class="success-message" id="success-message">
                    <h3>¡Gracias por confirmar tu asistencia!</h3>
                    <p>Hemos recibido tu respuesta correctamente.</p>
                    <p>Estamos deseando compartir contigo nuestro día especial.</p>
                </div>
                
                <a href="index.html" class="back-link">← Volver a la página principal</a>
            </div>
        </section>
    </main>
    
    <footer>
        <p>Miguel & Cristina - 2 de mayo de 2026</p>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menu-toggle');
            const menu = document.getElementById('menu');
            const menuOverlay = document.getElementById('menu-overlay');
            const body = document.body;
            const header = document.querySelector('.site-header');
            const menuItems = document.querySelectorAll('nav ul li a');
            
            // Toggle menu
            menuToggle.addEventListener('click', function() {
                menuToggle.classList.toggle('active');
                menu.classList.toggle('active');
                menuOverlay.classList.toggle('active');
                body.classList.toggle('menu-open');
            });
            
            // Close menu when clicking overlay
            menuOverlay.addEventListener('click', function() {
                closeMenu();
            });
            
            // Close menu when clicking a menu item
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    closeMenu();
                });
            });
            
            // Función para cerrar el menú
            function closeMenu() {
                menuToggle.classList.remove('active');
                menu.classList.remove('active');
                menuOverlay.classList.remove('active');
                body.classList.remove('menu-open');
            }
            
            // Header scroll effect
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
            
            // Mostrar u ocultar el detalle de restricciones alimentarias
            const dietarySelect = document.getElementById('dietary');
            const dietaryDetails = document.getElementById('dietary-details');
            
            dietarySelect.addEventListener('change', function() {
                if (this.value === 'Otra') {
                    dietaryDetails.style.display = 'block';
                } else {
                    dietaryDetails.style.display = 'none';
                }
            });
            
            // Mostrar u ocultar campos relacionados con la asistencia
            const attendingYes = document.getElementById('attending-yes');
            const attendingNo = document.getElementById('attending-no');
            const guestsGroup = document.getElementById('guests-group');
            const dietaryGroup = document.getElementById('dietary-group');
            
            attendingYes.addEventListener('change', function() {
                if (this.checked) {
                    guestsGroup.style.display = 'block';
                    dietaryGroup.style.display = 'block';
                }
            });
            
            attendingNo.addEventListener('change', function() {
                if (this.checked) {
                    guestsGroup.style.display = 'none';
                    dietaryGroup.style.display = 'none';
                }
            });

            // Manejo del envío del formulario con AJAX
            const form = document.getElementById('rsvp-form');
            const formStatus = document.getElementById('form-status');
            const successMessage = document.getElementById('success-message');
            
            async function handleSubmit(event) {
                event.preventDefault();
                
                // Mostrar indicador de carga
                formStatus.innerHTML = "Enviando tu respuesta...";
                formStatus.style.display = "block";
                formStatus.className = "form-status";
                
                try {
                    const data = new FormData(form);
                    const response = await fetch(form.action, {
                        method: form.method,
                        body: data,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        // Ocultar formulario y mostrar mensaje de éxito
                        form.style.display = 'none';
                        successMessage.style.display = 'block';
                        successMessage.scrollIntoView({behavior: 'smooth'});
                    } else {
                        const responseData = await response.json();
                        if (Object.hasOwn(responseData, 'errors')) {
                            formStatus.innerHTML = responseData.errors.map(error => error.message).join(", ");
                        } else {
                            formStatus.innerHTML = "Lo sentimos, ha ocurrido un problema al enviar el formulario. Por favor, inténtalo de nuevo.";
                        }
                        formStatus.className = "form-status error";
                    }
                } catch (error) {
                    console.error('Error:', error);
                    formStatus.innerHTML = "Lo sentimos, ha ocurrido un problema al enviar el formulario. Por favor, inténtalo de nuevo.";
                    formStatus.className = "form-status error";
                }
            }
            
            // Añadir el manejador de eventos al formulario
            form.addEventListener('submit', handleSubmit);
        });
    </script>
</body>
</html> 